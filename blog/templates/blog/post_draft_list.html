{% extends 'blog/base.html' %}

{% block content %}
{% if posts %}
<p class="text-center">You can edit your drafts here.</p>
{% else %}
<p class="text-center">No drafts available.</p>
{% endif %}
{% for post in posts %}
<div class="post">
    <p class="date">created: {{ post.created_date|date:'d-m-Y' }}</p>
    <h1><a href="{% url 'post_detail' pk=post.pk %}">{{ post.title }}</a></h1>
    <p>{{ post.text|truncatechars:200 }}</p>
    {% if user.is_authenticated %}
    <div class="actions">
        <a class="btn btn-secondary" href="{% url 'post_edit' pk=post.pk %}">Edit</a>
        <form method="post" action="{% url 'post_publish' pk=post.pk %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary">Publish</button>
        </form>
        <form method="post" action="{% url 'post_remove' pk=post.pk %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger"
                onclick="return confirm('Are you sure you want to delete this post?')">Delete</button>
        </form>
    </div>
    {% endif %}
</div>
{% endfor %}

{% endblock %}